language: node_js
services:
  - docker
node_js:
  - "10.15.3"
dist: trusty
sudo: required
branches:
  only:
  - master
before_script:
  - npm i -g @angular/cli
  - npm i -g newman
script:

  - cd front
  - npm i
  - ng build --prod
  - ng lint
  - cd ../back
  - npm i
  - npm run lint
  - npm run build
  - cd ..
  - docker-compose up --build -d
  - newman run postman/dinuti.postman_collection.json -e postman/dinuti.postman_environment.json
after_script:
  - docker-compose kill
notifications:
 slack: dinuti:3LUFGSdQUxe6Qxv9JiXLpuB9
